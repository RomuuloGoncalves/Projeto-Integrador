"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4626],{4626:(J,p,l)=>{l.r(p),l.d(p,{PerfilPageModule:()=>Y});var g=l(177),u=l(4341),r=l(8974),d=l(1671),f=l(467),o=l(4438),b=l(2906),x=l(2304),_=l(8397),h=l(8570),P=l(2490),k=l(3427),v=l(1994),M=l(3468),C=l(6002);const j=["atualizarForm"];function F(t,s){if(1&t){const i=o.RV6();o.j41(0,"div",3)(1,"h1"),o.EFF(2,"Atualize as informa\xe7\xf5es:"),o.k0s(),o.j41(3,"form",4,1),o.bIt("ngSubmit",function(){o.eBV(i);const e=o.XpG();return o.Njj(e.cadastrar())}),o.j41(5,"ion-row",5),o.nrm(6,"ion-input",6),o.k0s(),o.j41(7,"ion-row",5),o.nrm(8,"ion-input",7),o.k0s(),o.j41(9,"ion-row",5),o.nrm(10,"ion-input",8),o.k0s(),o.j41(11,"ion-row",5),o.nrm(12,"ion-input",9),o.k0s(),o.j41(13,"ion-row",10)(14,"ion-col",11),o.nrm(15,"app-btn-loading",12),o.k0s()(),o.j41(16,"ion-row",5),o.nrm(17,"ion-input",13),o.k0s()()()}if(2&t){const i=o.sdS(4),n=o.XpG();o.R7$(6),o.FS9("ngModel",n.nome),o.R7$(2),o.FS9("ngModel",n.email),o.R7$(2),o.FS9("ngModel",n.telefone),o.Y8G("maskito",n.mascaraTelefone)("maskitoElement",n.maskPredicate),o.R7$(2),o.FS9("ngModel",n.senha),o.R7$(3),o.Y8G("loading",n.loading)("disabled",!i.valid),o.R7$(2),o.FS9("ngModel",n.id_usuario)}}let T=(()=>{var t;class s{constructor(n,e,a,c,m){this.Usuario=n,this.Toast=e,this.router=a,this.Cookie=c,this.Mask=m,this.mascaraTelefone=this.Mask.mascaraTelefone,this.maskPredicate=this.Mask.maskPredicate,this.erros={},this.loading=!1}ngOnInit(){}cadastrar(){this.loading=!0;const n=this.atualizarForm.form.value;console.log(n),this.Usuario.atualizarDados(n).subscribe(e=>{this.loading=!1,this.Toast.mostrarToast("success","Atualizado realizado com sucesso");const m=new Date;m.setDate(m.getDate()+15),this.Cookie.delete("nome_usuario"),this.Cookie.set("nome_usuario",n.nome,{expires:m}),this.atualizarForm.reset(),this.router.navigate(["/perfil"]),setTimeout(()=>{location.reload()},200)},e=>{console.error("Erro ao atualizar os dados:",e),this.loading=!1,this.Toast.mostrarToast("danger","Algo deu errado!")})}}return(t=s).\u0275fac=function(n){return new(n||t)(o.rXU(h.o),o.rXU(_.f),o.rXU(d.Ix),o.rXU(P.O),o.rXU(v.s))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-atualizar-perfil"]],viewQuery:function(n,e){if(1&n&&o.GBs(j,5),2&n){let a;o.mGM(a=o.lsd())&&(e.atualizarForm=a.first)}},inputs:{nome:"nome",email:"email",id_usuario:"id_usuario",senha:"senha",telefone:"telefone"},decls:3,vars:0,consts:[["modal",""],["atualizarForm","ngForm"],["id","example-modal","trigger","open-custom-dialog"],[1,"wrapper"],[3,"ngSubmit"],[1,"input-container"],["name","nome","label","Nome:","label-placement","floating","type","text","fill","outline",3,"ngModel"],["name","email","label","E-mail:","label-placement","floating","type","text","fill","outline",3,"ngModel"],["name","telefone","label","Telefone:","label-placement","floating","fill","outline","type","text",3,"ngModel","maskito","maskitoElement"],["name","senha","label","Senha:","label-placement","floating","fill","outline","type","text",3,"ngModel"],[1,"ion-justify-content-center","ion-padding"],["size","auto"],["btnNome","Atualizar",3,"loading","disabled"],["name","id","type","hidden",3,"ngModel"]],template:function(n,e){1&n&&(o.j41(0,"ion-modal",2,0),o.DNE(2,F,18,9,"ng-template"),o.k0s())},dependencies:[u.qT,u.BC,u.cb,u.vS,u.cV,r.hU,r.$w,r.ln,r.Sb,r.Gw,M._,C.uj],styles:["ion-modal#example-modal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:20px 20px 10px}ion-modal#example-modal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;width:48px;height:48px;padding:4px 0;color:#aaa}ion-modal#example-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{margin-bottom:10px}ion-modal#example-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:40px}ion-modal#example-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin:10px 0}"]}),s})();const z=["imagemForm"],E=()=>["../cadastro-arduino"],S=()=>["../cadastro-sensor"],A=()=>["first"],O=t=>["/codigo-arduino",t];function y(t,s){if(1&t){const i=o.RV6();o.j41(0,"ion-content",23)(1,"ion-col")(2,"form",24,1),o.bIt("ngSubmit",function(){o.eBV(i);const e=o.XpG();return o.Njj(e.mudarImagem())}),o.j41(4,"ion-row",25)(5,"ion-input",26,2),o.bIt("change",function(e){o.eBV(i);const a=o.XpG();return o.Njj(a.selecionarArqs(e))}),o.k0s()(),o.j41(7,"ion-button",27),o.EFF(8," Alterar foto "),o.k0s()()()()}}function G(t,s){if(1&t){const i=o.RV6();o.qex(0),o.j41(1,"ion-row",31)(2,"ion-col",10)(3,"ion-label"),o.EFF(4),o.k0s()(),o.j41(5,"ion-col",10)(6,"ion-row")(7,"ion-col",10)(8,"ion-button",39),o.nrm(9,"ion-icon",16),o.k0s()(),o.j41(10,"ion-col",10)(11,"ion-button",40),o.bIt("click",function(){const e=o.eBV(i).$implicit,a=o.XpG(4);return o.Njj(a.mostrarAlertaExcluirSensor(e.id_sensor))}),o.nrm(12,"ion-icon",41),o.k0s()()()()(),o.bVm()}if(2&t){const i=s.$implicit;o.R7$(4),o.SpI(" ",i.nome," ")}}function $(t,s){if(1&t&&(o.qex(0),o.DNE(1,G,13,1,"ng-container",28),o.bVm()),2&t){const i=o.XpG().$implicit;o.R7$(),o.Y8G("ngForOf",i.sensores)}}function R(t,s){1&t&&(o.j41(0,"ion-row",42),o.EFF(1," N\xe3o h\xe1 sensores vinculados com este ardu\xedno "),o.k0s())}function I(t,s){if(1&t){const i=o.RV6();o.qex(0),o.j41(1,"ion-accordion",29)(2,"ion-item",30)(3,"ion-label")(4,"ion-row",31)(5,"ion-col",10)(6,"ion-label"),o.EFF(7),o.k0s()(),o.j41(8,"ion-col",10)(9,"ion-row")(10,"ion-col",10)(11,"ion-button",32),o.nrm(12,"ion-icon",33),o.k0s()(),o.j41(13,"ion-col",10)(14,"ion-button",34),o.nrm(15,"ion-icon",35),o.k0s()(),o.j41(16,"ion-col",10)(17,"ion-button",36),o.bIt("click",function(){const e=o.eBV(i).$implicit,a=o.XpG(2);return o.Njj(a.mostrarAlertaExcluirArduino(e.id_arduino))}),o.nrm(18,"ion-icon",37),o.k0s()()()()()()(),o.j41(19,"div",38),o.DNE(20,$,2,1,"ng-container",22)(21,R,2,0,"ng-template",null,3,o.C5r),o.k0s()(),o.bVm()}if(2&t){const i=s.$implicit,n=s.index,e=o.sdS(22);o.R7$(),o.Mz_("value","arduino-",n,""),o.R7$(6),o.SpI(" ",i.nome," "),o.R7$(4),o.Y8G("routerLink",o.eq3(8,O,i.id_arduino)),o.R7$(6),o.Mz_("id","excluir-",i.id_arduino,""),o.R7$(3),o.Y8G("ngIf",i.sensores.length>0)("ngIfElse",e)}}function U(t,s){if(1&t&&(o.qex(0),o.DNE(1,I,23,10,"ng-container",28),o.bVm()),2&t){const i=o.XpG();o.R7$(),o.Y8G("ngForOf",i.arduinos)}}function w(t,s){1&t&&(o.j41(0,"ion-row",42),o.EFF(1," N\xe3o h\xe1 arduinos cadastrados no seu perfil "),o.k0s())}const N=[{path:"",component:(()=>{var t;class s{constructor(n,e,a,c,m,L){this.Arduino=n,this.Sensor=e,this.Toast=a,this.Usuario=c,this.Cookie=m,this.alertController=L,this.loading=!1,this.arduinos=[],this.nome_usuario=this.Usuario.nome_usuario,this.id_usuario=this.Usuario.id_usuario,this.quantidade_arduinos=0,this.arqsSelecionados=[]}ngOnInit(){this.carregarPerfil()}carregarPerfil(){this.Usuario.pegarUsuario(this.Usuario.id_usuario).subscribe(n=>{console.log("user",n),this.usuario=n,this.usuario.imagem=this.Usuario.pegarImagem(this.usuario.imagem),this.listagemArduino(this.id_usuario)},n=>{console.log(n),this.loading=!1})}listagemArduino(n){this.Arduino.listarArduinoUsuarioSensor(n).subscribe(e=>{console.log("arduinos",e),this.arduinos=e,this.loading=!1,this.quantidade_arduinos=this.arduinos.length,this.Toast.mostrarToast("success","Listagem dos ardu\xednos concluida")},e=>{console.error("Erro ao cadastrar os dados:",e),this.loading=!1,this.Toast.mostrarToast("danger","Algo deu errado!")})}mostrarAlertaExcluirArduino(n){var e=this;return(0,f.A)(function*(){yield(yield e.alertController.create({header:"Alerta!",message:"Deseja excluir o ardu\xedno?",buttons:[{text:"N\xe3o",role:"cancel",handler:()=>{console.log("A\xe7\xe3o cancelada")}},{text:"Sim",handler:()=>{e.excluirArduino(n)}}]})).present()})()}excluirArduino(n){this.Arduino.excluirArduino(n).subscribe(e=>{location.reload(),this.Toast.mostrarToast("success","Ardu\xedno exclu\xeddo com sucesso")},e=>{console.error("Erro ao excluir os dados:",e),this.Toast.mostrarToast("danger","Erro ao excluir ardu\xedno!")})}mostrarAlertaExcluirSensor(n){var e=this;return(0,f.A)(function*(){yield(yield e.alertController.create({header:"Alerta!",message:"Deseja excluir o sensor?",buttons:[{text:"N\xe3o",role:"cancel",handler:()=>{console.log("A\xe7\xe3o cancelada")}},{text:"Sim",handler:()=>{e.excluirSensor(n)}}]})).present()})()}excluirSensor(n){this.Sensor.excluirSensor(n).subscribe(e=>{location.reload(),this.Toast.mostrarToast("success","Sensor exclu\xeddo com sucesso")},e=>{console.error("Erro ao excluir os dados:",e),this.Toast.mostrarToast("danger","Erro ao excluir o sensor!")})}selecionarArqs(n){this.arqsSelecionados=n.target.files}mudarImagem(){const n=this.imagemForm.form.value;n.imagem=this.arqsSelecionados[0],n.id=this.id_usuario,console.log(n),this.Usuario.alterarImagem(n).subscribe(e=>{console.log(e),location.reload(),this.Toast.mostrarToast("success","Imagem alterada com sucesso")},e=>{console.log(e),this.Toast.mostrarToast("danger","Erro ao trocar imagem!")})}}return(t=s).\u0275fac=function(n){return new(n||t)(o.rXU(b.u),o.rXU(x.u),o.rXU(_.f),o.rXU(h.o),o.rXU(P.O),o.rXU(r.hG))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-perfil"]],viewQuery:function(n,e){if(1&n&&o.GBs(z,5),2&n){let a;o.mGM(a=o.lsd())&&(e.imagemForm=a.first)}},decls:39,vars:18,consts:[["elseBlock",""],["imagemForm","ngForm"],["inputArqs",""],["elseBlockSensor",""],[3,"fullscreen"],[1,"ion-justify-content-center","ion-align-items-center","ion-margin-vertical"],["size","11"],[1,"ion-justify-content-center","ion-align-items-center"],["size","auto","id","trigger-button"],["alt","avatar",3,"src"],["size","auto"],["size","12"],["trigger","trigger-button"],[1,"auto"],[1,"ion-align-items-center"],["id","open-custom-dialog"],["size","small","name","create-outline"],[3,"nome","id_usuario","telefone","email","senha"],["size","12","sizeMd","6"],["routerDirection","back","expand","block","size","large","color","quartinary","fill","outline",1,"add__button",3,"routerLink"],["size","11",1,"lista","ion-padding"],[3,"multiple","value"],[4,"ngIf","ngIfElse"],[1,"ion-padding"],[3,"ngSubmit"],[1,"input-container"],["type","file","id","file","label","Imagem","label-placement","floating","fill","outline","placeholder","Escolhe a imagem do produto","type","file",1,"input__file",3,"change"],["type","ngSubmit","expand","block","size","medium","color","dark","fill","outline",1,"add__button"],[4,"ngFor","ngForOf"],[3,"value"],["slot","header","color","light"],[1,"lista__dispositivo","ion-justify-content-between","ion-align-items-center"],["expand","block","size","small","fill","oultine","color","dark",3,"routerLink"],["size","large","name","code-slash-outline"],["expand","block","size","small","fill","oultine","color","dark"],["size","large","name","create-outline"],["expand","block","size","small","color","dark",3,"click","id"],["size","large","name","trash-outline"],["slot","content",1,"ion-padding"],["expand","block","color","success"],["expand","block","color","danger",3,"click"],["size","small","name","trash-outline"],[1,"ion-justify-content-center"]],template:function(n,e){if(1&n&&(o.j41(0,"ion-content",4),o.nrm(1,"app-header"),o.j41(2,"ion-row",5)(3,"ion-col",6)(4,"ion-row",7)(5,"ion-col",8)(6,"ion-avatar"),o.nrm(7,"ion-img",9),o.k0s()(),o.j41(8,"ion-col",10)(9,"ion-row",7)(10,"ion-col",11)(11,"ion-label"),o.EFF(12),o.k0s()(),o.j41(13,"ion-col",11)(14,"ion-label"),o.EFF(15),o.k0s()()()(),o.j41(16,"ion-popover",12),o.DNE(17,y,9,0,"ng-template"),o.k0s(),o.j41(18,"ion-col",13)(19,"ion-row",14)(20,"ion-button",15),o.nrm(21,"ion-icon",16),o.k0s(),o.nrm(22,"app-atualizar-perfil",17),o.k0s()()()()(),o.j41(23,"ion-row",5)(24,"ion-col",6)(25,"ion-row",7)(26,"ion-col",18)(27,"ion-button",19)(28,"ion-row",7),o.EFF(29," Novo Ardu\xedno "),o.k0s()()(),o.j41(30,"ion-col",18)(31,"ion-button",19)(32,"ion-row",7),o.EFF(33," Novo Sensor "),o.k0s()()()()(),o.j41(34,"ion-col",20)(35,"ion-accordion-group",21),o.DNE(36,U,2,1,"ng-container",22)(37,w,2,0,"ng-template",null,0,o.C5r),o.k0s()()()()),2&n){const a=o.sdS(38);o.Y8G("fullscreen",!0),o.R7$(7),o.FS9("src",null==e.usuario?null:e.usuario.imagem),o.R7$(5),o.SpI(" ",e.nome_usuario," "),o.R7$(3),o.SpI(" ",e.quantidade_arduinos," dispositivos "),o.R7$(7),o.Y8G("nome",null==e.usuario?null:e.usuario.nome)("id_usuario",null==e.usuario?null:e.usuario.id_usuario)("telefone",null==e.usuario?null:e.usuario.telefone)("email",null==e.usuario?null:e.usuario.email)("senha",null==e.usuario?null:e.usuario.senha),o.R7$(5),o.Y8G("routerLink",o.lJ4(15,E)),o.R7$(4),o.Y8G("routerLink",o.lJ4(16,S)),o.R7$(4),o.Y8G("multiple",!0)("value",o.lJ4(17,A)),o.R7$(),o.Y8G("ngIf",e.arduinos.length>0)("ngIfElse",a)}},dependencies:[g.Sq,g.bT,u.qT,u.cb,u.cV,r.xk,r.YH,r.mC,r.Jm,r.hU,r.W9,r.iq,r.KW,r.$w,r.uz,r.he,r.ln,r.CF,r.Gw,r.N7,d.Wk,k.l,T],styles:[".lista[_ngcontent-%COMP%]{box-shadow:1px 1px 20px #0000002a;border-radius:5px}.icone[_ngcontent-%COMP%]{padding:5px;border-radius:5px}.icone[_ngcontent-%COMP%]:hover{cursor:pointer}.add__button[_ngcontent-%COMP%]{color:#0054e9}.editar[_ngcontent-%COMP%]{background-color:var(--ion-color-success)}.excluir[_ngcontent-%COMP%]{background-color:var(--ion-color-danger)}ion-alert.custom-alert[_ngcontent-%COMP%]{--backdrop-opacity: .7}.custom-alert[_ngcontent-%COMP%]   .alert-button-group[_ngcontent-%COMP%]{padding:8px}button.alert-button.alert-button-confirm[_ngcontent-%COMP%]{background-color:var(--ion-color-success);color:var(--ion-color-success-contrast)}.md[_ngcontent-%COMP%]   button.alert-button.alert-button-confirm[_ngcontent-%COMP%]{border-radius:4px}.ios[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]   button.alert-button[_ngcontent-%COMP%]{border:.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0),.2)}.ios[_ngcontent-%COMP%]   button.alert-button.alert-button-cancel[_ngcontent-%COMP%]{border-right:0;border-bottom-left-radius:13px;border-top-left-radius:13px}.ios[_ngcontent-%COMP%]   button.alert-button.alert-button-confirm[_ngcontent-%COMP%]{border-bottom-right-radius:13px;border-top-right-radius:13px}"]}),s})()}];let X=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[d.iI.forChild(N),d.iI]}),s})();var V=l(8178),D=l(8334),B=l(2898);let Y=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[g.MD,u.YN,r.bv,X,V.G,D.p,B.k]}),s})()}}]);