"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3741],{3741:(j,g,t)=>{t.r(g),t.d(g,{CodigoArduinoPageModule:()=>F});var p=t(177),h=t(4341),d=t(8974),u=t(1671),o=t(4438),C=t(2906),m=t(8397),f=t(8570),v=t(3427),A=t(2595);const P=[{path:"",component:(()=>{var n;class a{constructor(e,i,r,s){this.Arduino=e,this.Toast=i,this.Usuario=r,this.route=s,this.loading=!1,this.arduinos=[],this.nome_usuario=this.Usuario.nome_usuario,this.id_usuario=this.Usuario.id_usuario,this.quantidade_arduinos=0,this.generatedCode=""}ngOnInit(){this.route.params.subscribe(e=>{this.id_arduino=e.id_arduino}),this.listagemArduino(this.id_arduino),console.log(this.id_arduino)}listagemArduino(e){this.Arduino.listarArduinoSensor(e).subscribe(i=>{console.log("arduinos",i),this.arduinos=i,this.loading=!1,this.quantidade_arduinos=this.arduinos.length,this.Toast.mostrarToast("success","Listagem dos ardu\xednos conclu\xedda"),this.generateArduinoCode()},i=>{console.error("Erro ao cadastrar os dados:",i),this.loading=!1,this.Toast.mostrarToast("danger","Algo deu errado!")})}generateArduinoCode(){let e='\n#include <WiFiClient.h>\n#include <WiFi.h>\n#include <HTTPClient.h>\n#include <ArduinoJson.h>\n\nconst char* ssid = "your-ssid";\nconst char* password = "your-password";\nconst char* serverAddress = "https://amused-hopelessly-tetra.ngrok-free.app/Projeto-Integrador/System";\n\n';this.arduinos.forEach(i=>{i.sensores.forEach(r=>{const s=r.nome.replace(/\s+/g,"_").toUpperCase();e+=`#define ${s}_PIN ${r.pino}\n`})}),e+='\nvoid setup() {\n  Serial.begin(115200);\n  Serial.println("Hello, ESP32!");\n\n  WiFi.begin(ssid, password);\n  while (WiFi.status() != WL_CONNECTED) {\n    delay(100);\n    Serial.print(".");\n  }\n  Serial.println("Connected to WiFi");\n',this.arduinos.forEach(i=>{i.sensores.forEach(r=>{const s=r.nome.replace(/\s+/g,"_").toUpperCase();e+=`  pinMode(${s}_PIN, INPUT);\n`})}),e+='}\nvoid loop() {\n  if (WiFi.status() == WL_CONNECTED) {\n    HTTPClient http;\n    WiFiClient client;\n\n    StaticJsonDocument<200> doc;\n    JsonArray data = doc.createNestedArray("data");\n',this.arduinos.forEach(i=>{i.sensores.forEach((r,s)=>{const c=r.nome.replace(/\s+/g,"_"),T=c.toUpperCase();e+=`\n    int ${c}Value = analogRead(${T}_PIN);\n    JsonObject sensor${s+1}Data = data.createNestedObject();\n    sensor${s+1}Data["id_sensor"] = ${r.id_sensor};\n    sensor${s+1}Data["valor"] = ${c}Value;\n        `})}),e+='\n    String jsonString;\n    serializeJson(doc, jsonString);\n    Serial.println(jsonString);\n\n    http.begin(serverAddress);\n    http.addHeader("Content-Type", "application/json");\n\n    int httpResponseCode = http.POST(jsonString);\n    if (httpResponseCode > 0) {\n      String response = http.getString();\n      Serial.println(httpResponseCode);\n      Serial.println(response);\n    } else {\n      Serial.print("Erro ao enviar POST: ");\n      Serial.println(httpResponseCode);\n    }\n\n    http.end();\n  }\n  delay(10000);\n}\n',this.generatedCode=e}copyToClipboard(){const e=document.createElement("textarea");e.value=this.generatedCode,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.Toast.mostrarToast("success","C\xf3digo copiado para a \xe1rea de transfer\xeancia!")}}return(n=a).\u0275fac=function(e){return new(e||n)(o.rXU(C.u),o.rXU(m.f),o.rXU(f.o),o.rXU(u.nX))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-codigo-arduino"]],decls:18,vars:2,consts:[[3,"fullscreen"],[1,"ion-justify-content-center"],["size","11"],["expand","block","fill","outline","color","dark","size","large",3,"click"],[1,"ion-justify-content-center","ion-margin-vertical"],[1,"ion-margin-vertical"],["size","11",1,"codigo"]],template:function(e,i){1&e&&(o.j41(0,"ion-content",0),o.nrm(1,"app-header"),o.j41(2,"ion-row",1)(3,"ion-col",2)(4,"ion-button",3),o.bIt("click",function(){return i.copyToClipboard()}),o.EFF(5,"Copiar"),o.k0s()()(),o.j41(6,"ion-row",4)(7,"ion-col",2)(8,"ion-row",5)(9,"ion-label"),o.EFF(10,"C\xf3digo para implementa\xe7\xe3o"),o.k0s()()(),o.j41(11,"ion-col",6)(12,"pre"),o.EFF(13,"        "),o.j41(14,"code"),o.EFF(15),o.k0s(),o.EFF(16,"\n      "),o.k0s()()(),o.nrm(17,"app-footer"),o.k0s()),2&e&&(o.Y8G("fullscreen",!0),o.R7$(15),o.SpI("\n        ",i.generatedCode,"\n        "))},dependencies:[d.Jm,d.hU,d.W9,d.he,d.ln,v.l,A.n],styles:[".codigo[_ngcontent-%COMP%]{background-color:var(--ion-color-light);border-radius:10px;box-shadow:2px 2px 20px #00000059}ion-label[_ngcontent-%COMP%]{font-size:1.5rem}"]}),a})()}];let y=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[u.iI.forChild(P),u.iI]}),a})();var S=t(8178),E=t(2898);let F=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[p.MD,h.YN,d.bv,y,S.G,E.k]}),a})()}}]);